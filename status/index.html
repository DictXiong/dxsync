<!DOCTYPE html>
<html lang="zh-cn">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <link
            href="https://fonts.loli.net/css?family=Open+Sans:300,400,700|Ubuntu:300|Consolas"
            rel="stylesheet"
            type="text/css"
        />
        <link
            href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css"
            rel="stylesheet"
            type="text/css"
        />
        <link
            href="https://tools.beardic.cn/css/page.css"
            rel="stylesheet"
            type="text/css"
        />

        <link
            rel="icon"
            href="https://tools.beardic.cn/icon/favicon_32.png"
            sizes="32x32"
        />
        <link
            rel="icon"
            href="https://tools.beardic.cn/icon/favicon_192.png"
            sizes="192x192"
        />
        <link
            rel="icon"
            href="https://tools.beardic.cn/icon/favicon.png"
            sizes="512x512"
        />
        <link rel="apple-touch-icon-precomposed" href="/icon/favicon_180.png" />
        <meta name="msapplication-TileImage" content="/icon/favicon_270.png" />

        <script src="https://cdn.staticfile.org/jquery/3.3.1/jquery.min.js"></script>
        <script src="https://tools.beardic.cn/js/pagemap.min.js"></script>
        <script src="https://tools.beardic.cn/js/page.js"></script>

        <title>Status of Mirrors</title>
    </head>

    <body>
        <section class="container md-shadow">
            <article>
                <header>
                    <h1><span id="hostname"></span>/mirrors: status</h1>
                </header>
                <table align="center">
                    <thead>
                        <tr>
                            <th>mirror</th>
                            <th>size</th>
                            <th>last update</th>
                            <th>status</th>
                        </tr>
                    </thead>
                    <tbody align="center" id="mirror_list">
                    </tbody>
                </table>
                <footer>
                    <p></p>
                </footer>
            </article>
        </section>

        <script>
            $("#hostname").text(window.location.hostname);
            $.get("index", function(data){
                const list = data.split('\n')
                for (i in list) {
                    const name=list[i]
                    if (name.length == 0) {
                        continue;
                    }
                    const safe_name = name.replace(/\//g, "_");
                    $.get(safe_name + ".log", function (data) {
                        var data = data.split("\n");
                        const line_header =
                            "<td><a href='../" + name + "'>" + name + "</a></td>";
                        for (j in data) {
                            if (data[j] != "") {
                                data[j] = "<td>" + data[j] + "</td>";
                            }
                        }
                        $("#mirror_list").append(
                            "<tr id='" + safe_name + "'>" +
                                line_header + data.join("") +
                            "</tr>"
                        );
                        console.log(data);
                    });
                }
            })
        </script>

        <div hidden id="bottom-bar">
            <p>2023 - Â©BearDic.cn</p>
        </div>
    </body>
</html>
